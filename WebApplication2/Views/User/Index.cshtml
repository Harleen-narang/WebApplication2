@model IEnumerable<User>
<body style="background-color:#FFFFFF">
    <div class="container mt-5" style="  border-radius:7px;  background: #e1e1e2;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
        <h2 class="text-center mb-4 decorative-heading">@ViewData["Title"]</h2>
        <table class="table table-striped table-hover" id="userTable">
            <thead style="background-color:#800080; box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.7);">
                <tr>
                    <th style="color:white !important;">ID</th>
                    <th style="color:white !important;">Name</th>
                    <th style="color:white !important;">Email</th>
                    <th style="color:white !important;">Created At</th>
                    <th style="color:white !important;">File</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model)
                {
                    <tr>
                        <td style="text-align: right;">@user.Id</td>
                        <td style="text-align: left;">@user.Name</td>
                        <td style="text-align: left;">@user.Email</td>
                        <td style="text-align: right;">@user.CreatedAt.ToShortDateString()</td>
                        <td>
                            @* <a href="@Url.Action("File", "User")" class="icon-link"> *@
                            <a href="#" class="icon-link" data-toggle="modal" id="viewbtn" data-id="@user.Id" data-target="#myModal" >
                                <i class="fas fa-eye fa-2x "></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        <!-- Modal Structure -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        @* <h5 class="modal-title" id="exampleModalLabel">File Details</h5> *@
                        <h2 class="mt-4 mb-4 text-center decorative-heading">Customer Onboarding Application Form View</h2>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">

                        <!-- Customer Details Section -->
                        <div class="form-section">
                            <div class="section-header">Customer Details</div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>Region</label>
                                    <span id="region"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Zone</label>
                                    <span id="zone"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Group Company Associate<br />(If any) </label>
                                    <span id="groupComp"></span>
                                </div>
                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>Plan Type</label>
                                    <span id="planType"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Customer Type</label>
                                    <span id="custType"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Business Verticle</label>
                                    <span id="busVer"></span>
                                </div>
                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>Enterprise Type</label>
                                    <span id="entType"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>TM ID</label>
                                    <span id="tmId"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>PE ID</label>
                                    <span id="peId"></span>
                                </div>

                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>Name of person/Company/<br />Firm/Association/Trust</label>
                                    <span id="namePer"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>SAP Code</label>
                                    <span id="sapCode"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Geo SAP Code</label>
                                    <span id="geoCode"></span>
                                </div>

                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>Account Manager</label>
                                    <span id="accManager"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Sales Person</label>
                                    <span id="salesPerson"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Company</label>
                                    <span id="company"></span>
                                </div>

                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>Customer Account No</label>
                                    <span id="custAcc"></span>
                                </div>
                                <div class="col form-group">
                                    <label>Channel Partner</label>
                                    <span id="channelPartner"></span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Charging Mode</label>
                                    <span id="chargingMode"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Permanent Address Section -->
                        <div class="form-section">
                            <div class="section-header">Permanent Address</div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>House/SCO/SCF/Plot<br />/Shop/Booth No</label>
                                    @* <span>@Model.PermanentAddress.Street</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Floor No</label>
                                    @* <span>@Model.PermanentAddress.City</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Building/Estb.Name</label>
                                    @* <span>@Model.PermanentAddress.PinCode</span> *@
                                </div>
                                <!-- Add more fields as needed -->
                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>Street Name/No/BlockNo</label>
                                    @* <span>@Model.PermanentAddress.Street</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Locality</label>
                                    @* <span>@Model.PermanentAddress.City</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Landmark</label>
                                    @* <span>@Model.PermanentAddress.PinCode</span> *@
                                </div>
                                <!-- Add more fields as needed -->
                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>City/Town/Tehsil</label>
                                    @* <span>@Model.PermanentAddress.City</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Post Office</label>
                                    @* <span>@Model.PermanentAddress.Street</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>District</label>
                                    @* <span>@Model.PermanentAddress.PinCode</span> *@
                                </div>
                                <!-- Add more fields as needed -->
                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>State</label>
                                    @* <span>@Model.PermanentAddress.City</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Pin Code</label>
                                    @* <span>@Model.PermanentAddress.Street</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Contact Number</label>
                                    @* <span>@Model.PermanentAddress.PinCode</span> *@
                                </div>
                                <!-- Add more fields as needed -->
                            </div>
                        </div>
                        <!-- Billing Address Section -->
                        <div class="form-section">
                            <div class="section-header">Billing Address</div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>House/SCO/SCF/Plot<br />/Shop/Booth No</label>
                                    @* <span>@Model.PermanentAddress.Street</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Floor No</label>
                                    @* <span>@Model.PermanentAddress.City</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Building/Estb.Name</label>
                                    @* <span>@Model.PermanentAddress.PinCode</span> *@
                                </div>
                                <!-- Add more fields as needed -->
                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>Street Name/No/Block No</label>
                                    @* <span>@Model.PermanentAddress.Street</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Locality</label>
                                    @* <span>@Model.PermanentAddress.City</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Landmark</label>
                                    @* <span>@Model.PermanentAddress.PinCode</span> *@
                                </div>
                                <!-- Add more fields as needed -->
                            </div>
                            <div class="row mb-3 rows  ">
                                <div class="col-md-4 form-group">
                                    <label>City/Town/Tehsil</label>
                                    @* <span>@Model.PermanentAddress.City</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Post Office</label>
                                    @* <span>@Model.PermanentAddress.Street</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>District</label>
                                    @* <span>@Model.PermanentAddress.PinCode</span> *@
                                </div>
                                <!-- Add more fields as needed -->
                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>State</label>
                                    <span>PermanentAddress.City</span>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Pin Code</label>
                                    @* <span>@Model.PermanentAddress.Street</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Contact Number</label>
                                    @* <span>@Model.PermanentAddress.PinCode</span> *@
                                </div>
                                <!-- Add more fields as needed -->
                            </div>
                        </div>
                        <!-- Contact Details Section -->
                        <div class="form-section">
                            <div class="section-header">Contact Details</div>
                            <table class="table table-bordered table-sm custom-table"  id="contactTable">
                                <thead style="background-color:#E0BBE4">
                                    <tr>
                                        <th>Function</th>
                                        <th>Contact Person</th>
                                        <th>Contact Number</th>
                                        <th>Email ID</th>
                                    </tr>
                                </thead>
                                <tbody>
                                  
                                </tbody>
                            </table>
                        </div>
                        <!-- Payment Terms Section -->
                        <div class="form-section">
                            <div class="section-header">Payment Terms</div>
                            <div class="row mb-3 rows  ">
                                <div class="col-md-4 form-group">
                                    <label>Invoice period(In Days)*</label>
                                    @* <span>@Model.PermanentAddress.City</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Agreed Payment Term(In Days)</label>
                                    @* <span>@Model.PermanentAddress.Street</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Payment Term as per Agreement(In Days)*</label>
                                    @* <span>@Model.PermanentAddress.PinCode</span> *@
                                </div>
                                <!-- Add more fields as needed -->
                            </div>
                            <div class="row mb-3 rows ">
                                <div class="col-md-4 form-group">
                                    <label>PDC/BG(In Rupees)*</label>
                                    @* <span>@Model.PermanentAddress.City</span> *@
                                </div>
                                <div class="col-md-4 form-group">
                                    <label>Credit Limit(In Rupees)*</label>
                                    @* <span>@Model.PermanentAddress.Street</span> *@
                                </div>
                            </div>
                        </div>
                        <!-- Document Section -->
                        <div class="form-section">
                            <div class="section-header">Document Section</div>
                            <table class="table table-bordered table-striped table-sm custom-table">
                                <thead style="background-color:#E0BBE4">
                                    <tr>
                                        <th>Sr No</th>
                                        <th>Proof Type</th>
                                        <th>Value</th>
                                        <th>File Name</th>
                                        <th>Deviation</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>PAN No</td>
                                        <td>AHGH6767</td>
                                        <td>
                                            <a href="@Url.Action("File", "User")" class="icon-link zoom-out">
                                                <i class="fas fa-eye"></i>&nbsp; File Name
                                            </a>
                                        </td>
                                        <td>Yes</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-purple" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
        <style>

  .form-group label {
      font-weight: bold;
      display: inline;
      font-size: 12px;
      white-space: nowrap;
  }

  .rows {
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* Three columns layout */
      grid-auto-rows: auto;
      gap: 10px 15px; /* Spacing between rows and columns */
      margin: 0;
  }

  .form-group span {
      font-weight: normal;
      font-size: 12px;
      text-align: left;
      white-space: nowrap;
     
      text-overflow: ellipsis; /* Add ellipsis if text overflows */
  }

  .form-group {
      display: grid;
      grid-template-columns: 150px 1fr; /* Two columns: labels and values */
      align-items: center;
      gap: 5px; /* Add space between label and value */
  }

  @@media (max-width: 768px) {
      .rows {
          grid-template-columns: repeat(2, 1fr); /* Adjust to 2 columns on medium screens */
      }
      .form-group {
          grid-template-columns: 120px 1fr; /* Adjust for smaller screens */
      }
  }

  @@media (max-width: 480px) {
      .rows {
          grid-template-columns: 1fr; /* Full width for small screens */
      }
      .form-group {
          grid-template-columns: 1fr; /* Full width for both label and value */
      }
  }

  .modal-footer {
      display: flex;
      justify-content: center;
      width: 100%;
  }

  .modal-footer .btn {
      margin-left: auto;
  }
  
.custom-table {
    display: inline-table;
    margin-top: 10px;
    width: 99%;
    max-width: 100%;
    box-sizing: border-box;
    margin-left: 5px;
    margin-right: 10px;
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    border-radius: 0;
}

    .custom-table thead {
        background-color: #E0BBE4;
        color: #333;
        padding: 0.1rem;
        padding: 0.1rem;
        font-size: 0.8rem;
        height: 20px;
        border: 1px solid #E0BBE4;
        text-align: center;
        overflow: hidden;
        line-height: 1;
        
    }

    .custom-table th,
    .custom-table td {
        padding: 0;
        font-size: 0.7rem;
        height: 10px;
        margin-top:0;
        margin-bottom:0;
        border: 1px solid #E0BBE4;
        text-align: center;
        overflow: hidden;
        line-height: 1;
    }
    .custom-table tr{
        height:20px;
    }
    .custom-table th {
        text-align: center;
    }


  .section-header {
      padding: 1px;
  }

  .section-header {
      background-color: #800080;
      color: white;
      text-align: left;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
  }

  .form-section {
      border: 1px solid #004080;
      background-color: #FFFFFF;
      justify-content: center;
      box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.25);
      padding: 5px;
  }

  .decorative-heading {
      font-size: 32px;
      font-weight: bold;
      color: #800080;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      border-bottom: 2px solid #800080;
      padding-bottom: 10px;
      letter-spacing: 1px;
      font-family: 'Arial', sans-serif;
      transition: color 0.3s;
  }

  .decorative-heading:hover {
      color: #5A005A;
  }

</style>
<script>
        $('#viewbtn').on('click', function () {
            
            var customerId = $(this).data('id'); // Get the customer ID from the button

            $.ajax({
                url: '/User/GetCustomerDetails',  // Your backend endpoint
                method: 'GET',
                data: { id: customerId },
                success: function (response) {
                    console.log(response);

                    // Function to handle null or empty values
                    function handleNull(value) {
                       
                        return value ? value : '-'; // Return the value if it's not null/empty, otherwise return '-'
                    }

                    // Populate the modal with the returned data, using handleNull for each field
                    $('#region').text(handleNull(response.region));
                    $('#zone').text(handleNull(response.zone));
                    $('#groupComp').text(handleNull(response.groupComp));
                    $('#planType').text(handleNull(response.planType));
                    $('#custType').text(handleNull(response.custType));
                    $('#busVer').text(handleNull(response.busVer));
                    $('#entType').text(handleNull(response.entType));
                    $('#tmId').text(handleNull(response.tMId));
                    $('#peId').text(handleNull(response.pEId));
                    $('#namePer').text(handleNull(response.namePerson));
                    $('#sapCode').text(handleNull(response.sAPCode));
                    $('#geoCode').text(handleNull(response.geoCode));
                    $('#accManager').text(handleNull(response.accManager));
                    $('#salesPerson').text(handleNull(response.salesPerson));
                    $('#company').text(handleNull(response.company));
                    $('#custAcc').text(handleNull(response.custAcc));
                    $('#channelPartner').text(handleNull(response.channel));
                    $('#chargingMode').text(handleNull(response.chargingMode));

                    // Show the modal
                    $('#myModal').modal('show');
                },
                error: function (error) {
                    console.error("Error fetching customer details: ", error);
                }
            });



            $.ajax({
                url: '/User/GetContacts', // Adjust the URL according to your routing
                            type: 'GET',
                data: { id: customerId },
                success: function (data) {
                    let rows = '';
                    $.each(data, function (index, contact) {
                        rows += `<tr>
                                            <td>${contact.function}</td>
                                            <td>${contact.contactPerson}</td>
                                            <td>${contact.contactNumber}</td>
                                            <td>${contact.emailId}</td>
                                          </tr>`;
                    });
                    $('#contactTable tbody').append(rows);
                },
                error: function (xhr, status, error) {
                    console.error('Error fetching contacts:', error);
                }
            });
        });

</script>
</body>
